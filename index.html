<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWEZA TV PRO</title>
    <style>
        body { background: #050505; color: white; font-family: sans-serif; text-align: center; margin: 0; }
        .header { padding: 25px; background: #1a1a1a; font-size: 26px; border-bottom: 3px solid #e50914; }
        .video-box { width: 100%; background: #000; aspect-ratio: 16/9; margin-bottom: 10px; }
        video { width: 100%; height: 100%; }
        .btn-group { padding: 15px; display: flex; flex-direction: column; gap: 10px; align-items: center; }
        
        .vlc-btn {
            background: #ff9800; color: black; padding: 15px 30px;
            text-decoration: none; border-radius: 50px; font-weight: bold;
            display: flex; align-items: center; gap: 10px; width: 80%; justify-content: center;
        }

        .channel-list { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 20px; }
        .channel-item { background: #1a1a1a; padding: 20px; border-radius: 12px; border: 1px solid #333; cursor: pointer; }
        .channel-item:active { transform: scale(0.95); background: #333; }
    </style>
</head>
<body>

<div class="header">AWEZA TV</div>

<div class="video-box">
    <video id="player" controls autoplay playsinline></video>
</div>

<div class="btn-group">
    <p id="currentName">Ú©Û•Ù†Ø§ÚµÛŽÚ© Ù‡Û•ÚµØ¨Ú˜ÛŽØ±Û•</p>
    <button onclick="openInVLC()" class="vlc-btn">
         Ú©Ø±Ø¯Ù†Û•ÙˆÛ• Ø¨Û• Ø¦Û•Ù¾ÛŒ VLC ðŸ“º
    </button>
</div>

<div class="channel-list" id="list"></div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
    let currentUrl = "";
    const channels = [
        { name: "Rudaw", url: "https://lb.rudaw.net/rudawlive/smil:rudaw.smil/playlist.m3u8" },
        { name: "Kurdstat", url: "https://live.kurdstat.com/hls/stream.m3u8" },
        { name: "K24", url: "https://live.k24.com/hls/stream.m3u8" }
    ];

    const video = document.getElementById('player');
    const nameLabel = document.getElementById('currentName');

    function selectChannel(url, name) {
        currentUrl = url;
        nameLabel.innerText = "Ú©Û•Ù†Ø§ÚµÛŒ Ù‡Û•ÚµØ¨Ú˜ÛŽØ±Ø¯Ø±Ø§Ùˆ: " + name;
        
        // ÛŒÛ•Ú©Û•Ù…Ø¬Ø§Ø± Ù‡Û•ÙˆÚµ Ø¯Û•Ø¯Û•ÛŒÙ† Ù„Û•Ù†Ø§Ùˆ Ø¨Û•Ø±Ù†Ø§Ù…Û•Ú©Û•Ø¯Ø§ Ù„ÛŽÛŒ Ø¨Ø¯Û•ÛŒÙ†
        if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(url);
            hls.attachMedia(video);
        } else {
            video.src = url;
        }
    }

    function openInVLC() {
        if (!currentUrl) {
            alert("ØªÚ©Ø§ÛŒÛ• Ø³Û•Ø±Û•ØªØ§ Ú©Û•Ù†Ø§ÚµÛŽÚ© Ù‡Û•ÚµØ¨Ú˜ÛŽØ±Û•!");
            return;
        }

        // Ú•ÛŽÚ¯Û•ÛŒ ÛŒÛ•Ú©Û•Ù…: Intent (Ø¨Û† Ø¦Û•Ù†Ø¯Ø±Û†ÛŒØ¯ Ø²Û†Ø± Ø¨Û•Ù‡ÛŽØ²Û•)
        const androidIntent = `intent://${currentUrl.replace(/^https?:\/\//, '')}#Intent;scheme=http;package=org.videolan.vlc;S.title=AwezaTV;end`;
        
        // Ú•ÛŽÚ¯Û•ÛŒ Ø¯ÙˆÙˆÛ•Ù…: vlc:// (Ø¨Û† Ø¦Ø§ÛŒÙÛ†Ù† Ùˆ Ù‡Û•Ù†Ø¯ÛŽÚ© Ù…Û†Ø¨Ø§ÛŒÙ„ÛŒ ØªØ±)
        const iosLink = "vlc://" + currentUrl;

        // ØªØ§Ù‚ÛŒÚ©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ú•ÛŽÚ¯Û•ÛŒ ÛŒÛ•Ú©Û•Ù…ØŒ Ø¦Û•Ú¯Û•Ø± Ù†Û•Ø¨ÙˆÙˆ Ú•ÛŽÚ¯Û•ÛŒ Ø¯ÙˆÙˆÛ•Ù…
        try {
            window.location.href = androidIntent;
            setTimeout(() => {
                window.location.href = iosLink;
            }, 500);
        } catch (e) {
            window.location.href = iosLink;
        }
    }

    const listDiv = document.getElementById('list');
    channels.forEach(ch => {
        const div = document.createElement('div');
        div.className = 'channel-item';
        div.innerText = ch.name;
        div.onclick = () => selectChannel(ch.url, ch.name);
        listDiv.appendChild(div);
    });
</script>

</body>
</html>
